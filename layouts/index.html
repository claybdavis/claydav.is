{{ define "main" }}
<article class="page-content">
    <section class="profile-section stack-on-mobile">
        <div class="profile-text">
            <div class="profile-bio">
                {{ .Content }}
            </div>
        </div>
        <figure class="profile-image">
            <img src="{{ "images/profile/clay-davis.jpg" | relURL }}" alt="Clay Davis" loading="eager" />
        </figure>
    </section>
    
    <section class="contact-section">
        <nav class="contact-icons" aria-label="Contact information">
            <a href="mailto:cdavis@northwestern.edu" class="contact-link" aria-label="Email">
                <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"></path>
                    <polyline points="22,6 12,13 2,6"></polyline>
                </svg>
            </a>
            <a href="https://scholar.google.com/citations?hl=en&user=ZuazMDwAAAAJ" class="contact-link" aria-label="Google Scholar">
                <svg class="icon" viewBox="0 0 24 24" fill="currentColor">
                    <path d="M 11 4 L 3 9 L 8.4921875 9 C 8.4715892 9.0754986 8.4383718 9.1441171 8.421875 9.2226562 C 8.375875 9.4646562 8.3398437 9.7308125 8.3398438 10.007812 C 8.3398438 13.578812 11.990234 13.175781 11.990234 13.175781 L 11.990234 14.085938 C 11.990234 14.454937 12.47425 14.327172 12.53125 15.076172 C 12.28925 15.076172 7.4746094 14.937547 7.4746094 18.185547 C 7.4746094 21.445547 11.724609 21.285156 11.724609 21.285156 C 11.724609 21.285156 16.632812 21.504656 16.632812 17.472656 C 16.634813 15.063656 13.822266 14.2795 13.822266 13.3125 C 13.822266 12.3335 15.941406 12.045906 15.941406 9.7539062 C 15.941406 8.7519062 15.872828 8.03825 15.423828 7.53125 C 15.388828 7.49625 15.366031 7.4722188 15.332031 7.4492188 C 15.324304 7.4420199 15.31448 7.4367774 15.306641 7.4296875 L 15.429688 7.4296875 L 17.5 5.8769531 L 17.5 8 A 0.50005 0.50005 0 0 0 17.511719 8.1152344 A 1.0001 1.0001 0 0 0 17 9 L 17 10 A 1.0001 1.0001 0 1 0 19 10 L 19 9 A 1.0001 1.0001 0 0 0 18.488281 8.1152344 A 0.50005 0.50005 0 0 0 18.5 8 L 18.5 5.125 L 20 4 L 11 4 z M 11.691406 7.0527344 C 11.979219 7.0397031 12.268922 7.109625 12.544922 7.265625 C 12.751922 7.369625 12.946141 7.518125 13.119141 7.703125 C 13.476141 8.060125 13.7765 8.5784531 13.9375 9.1894531 C 14.3175 10.640453 13.823828 12.035781 12.798828 12.300781 C 11.784828 12.587781 10.654672 11.641172 10.263672 10.201172 C 10.090672 9.4991719 10.114547 8.8202969 10.310547 8.2792969 C 10.312395 8.2723193 10.316443 8.2666961 10.318359 8.2597656 C 10.321722 8.2581149 10.32682 8.253536 10.330078 8.2519531 C 10.386262 8.0380596 10.478099 7.8461668 10.589844 7.6875 C 10.795388 7.3872165 11.066477 7.1838352 11.404297 7.09375 C 11.499297 7.07075 11.595469 7.0570781 11.691406 7.0527344 z M 12.082031 15.685547 C 13.775031 15.558547 15.216313 16.490813 15.320312 17.757812 C 15.390313 19.013813 14.087812 20.131094 12.382812 20.246094 C 10.689813 20.361094 9.2274844 19.441547 9.1464844 18.185547 C 9.0654844 16.918547 10.377031 15.812547 12.082031 15.685547 z"/>
                </svg>
            </a>
            <a href="https://bsky.app/profile/claydav.is" class="contact-link" aria-label="Bluesky">
                <svg class="icon" viewBox="0 0 568 501" fill="currentColor">
                    <path d="M123.121 33.6637C188.241 82.5526 258.281 181.681 284 234.873C309.719 181.681 379.759 82.5526 444.879 33.6637C491.866 -1.61183 568 -28.9064 568 57.9464C568 75.2916 558.055 203.659 552.222 224.501C 531.947 296.954 458.067 315.434 392.347 304.249C507.222 323.8 536.444 388.56 473.333 453.32C353.473 576.312 301.061 422.461 287.631 383.039C285.169 375.812 284.017 372.431 284 375.306C283.983 372.431 282.831 375.812 280.369 383.039C266.939 422.461 214.527 576.312 94.6667 453.32C31.5556 388.56 60.7778 323.8 175.653 304.249C109.933 315.434 36.0535 296.954 15.7778 224.501C9.94525 203.659 0 75.2916 0 57.9464C0 -28.9064 76.1345 -1.61183 123.121 33.6637Z"/>
                </svg>            
            </a>
        </nav>
    </section>
    
    {{ if not .Params.hide_home_widgets }}
    <section class="recent-publications-section">
        <h3>Recent Publications</h3>
        <div class="content-list home-publications-grid stack-on-mobile">
            {{ $allPublications := where (where .Site.RegularPages "Section" "publications") ".Params.date" "!=" nil }}
            {{ $sortedPublications := sort $allPublications ".Params.date" "desc" }}
            {{ range first 3 $sortedPublications }}
            <a href="{{ .RelPermalink }}" class="content-item home-publication-card">
                {{ if .Params.cover_image }}
                <div class="content-item-image">
                    <img src="{{ printf "images/%s" .Params.cover_image | relURL }}" alt="Cover image for {{ .Title }}" loading="lazy" />
                </div>
                {{ end }}
                <div class="content-item-content">
                    <h4>{{ .Title }}</h4>
                    <div class="content-meta">
                        <time datetime="{{ .Date.Format "2006-01-02" }}">
                            {{ with .Params.author }}<span class="publication-author">{{ . }}</span> &middot; {{ end }}{{ .Date.Format "2006" }}
                        </time>
                    </div>
                    {{ with .Params.journal }}<p class="publication-journal">{{ . }}</p>{{ end }}
                </div>
            </a>
            {{ end }}
        </div>
    </section>
    
    <section class="reading-social-section">
        <div class="reading-social-grid stack-on-mobile">
            {{ if .Params.goodreads_username }}
            <div class="reading-column widget-loading">
                <h3>Currently Reading</h3>
                {{ partial "goodreads.html" . }}
            </div>
            {{ end }}
            {{ if .Params.bluesky_username }}
            <div class="social-column widget-loading">
                <h3>Latest Post on Bluesky</h3>
                {{ partial "bluesky.html" . }}
            </div>
            {{ end }}
        </div>
    </section>
    {{ end }}
</article>
{{ end }}

{{ define "page-css" }}
    {{ $listCSS := resources.Get "css/list.css" | resources.Minify | resources.Fingerprint }}
    <link rel="stylesheet" href="{{ $listCSS.RelPermalink }}">
    {{ $pageCSS := resources.Get "css/home.css" | resources.Minify | resources.Fingerprint }}
    <link rel="stylesheet" href="{{ $pageCSS.RelPermalink }}">
    {{ $goodreadsCSS := resources.Get "css/goodreads.css" | resources.Minify | resources.Fingerprint }}
    <link rel="stylesheet" href="{{ $goodreadsCSS.RelPermalink }}">
{{ end }}

{{ define "page-js" }}
    {{ if and .Params.goodreads_username (not .Params.hide_home_widgets) }}
    <script>
        window.goodreadsUsername = '{{ .Params.goodreads_username }}';
    </script>
    {{ $goodreadsJS := resources.Get "js/goodreads-widget.js" }}
    {{ if $goodreadsJS }}
        {{ $goodreadsJS = $goodreadsJS | resources.Minify | resources.Fingerprint }}
        <script src="{{ $goodreadsJS.RelPermalink }}" defer></script>
    {{ end }}
    {{ end }}
    
    {{ if and .Params.bluesky_username (not .Params.hide_home_widgets) }}
    {{ $blueskyJS := resources.Get "js/bluesky-widget.js" }}
    {{ if $blueskyJS }}
        {{ $blueskyJS = $blueskyJS | resources.Minify | resources.Fingerprint }}
        <script src="{{ $blueskyJS.RelPermalink }}" defer></script>
    {{ end }}
    {{ end }}
{{ end }} 