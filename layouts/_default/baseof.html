<!DOCTYPE html>
<html lang="{{ .Site.LanguageCode }}">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>{{ if not .IsHome }}{{ .Title }} - {{ end }}{{ .Site.Title }}</title>
    <meta name="description" content="{{ if .Description }}{{ .Description }}{{ else }}{{ .Site.Params.description }}{{ end }}">
    <meta name="author" content="{{ .Site.Params.author }}">

    <!-- Favicon -->
    <link rel="icon" type="image/svg+xml" sizes="any" href='data:image/svg+xml;base64,{{ (partial "favicon.html" .) | base64Encode }}'>
    {{ with .Site.Params.colors.primary }}
    <meta name="theme-color" content="{{ . }}">
    {{ end }}

    <!-- CSS -->
    {{ $mainCSS := resources.Get "css/main.css" | resources.ExecuteAsTemplate "css/main.css" . | resources.Minify | resources.Fingerprint }}
    <link rel="stylesheet" href="{{ $mainCSS.RelPermalink }}">
    {{ $headerCSS := resources.Get "css/header.css" | resources.Minify | resources.Fingerprint }}
    <link rel="stylesheet" href="{{ $headerCSS.RelPermalink }}">
    {{ $footerCSS := resources.Get "css/footer.css" | resources.Minify | resources.Fingerprint }}
    <link rel="stylesheet" href="{{ $footerCSS.RelPermalink }}">
    {{ $contactIconsCSS := resources.Get "css/contacticons.css" | resources.Minify | resources.Fingerprint }}
    <link rel="stylesheet" href="{{ $contactIconsCSS.RelPermalink }}">
    {{ block "page-css" . }}{{ end }}
    
    <!-- Resource hints for external domains -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link rel="preconnect" href="https://cloud.umami.is">
    {{ if .IsHome }}
    <!-- Preload critical homepage image -->
    <link rel="preload" as="image" href="{{ (resources.Get "images/profile/clay-davis.jpg").Resize "400x webp" | relURL }}" type="image/webp">
    {{ if not .Params.hide_home_widgets }}
    <!-- Widget external domains (only when widgets are enabled) -->
    <link rel="preconnect" href="https://bsky.social">
    <link rel="preconnect" href="https://www.goodreads.com">
    <link rel="preconnect" href="https://corsproxy.io">
    <link rel="preconnect" href="https://api.allorigins.win">
    {{ end }}
    {{ end }}
    
    <!-- Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Geologica:ital,wght@0,300;0,400;0,500;0,600;1,300;1,400;1,500;1,600&family=Source+Serif+Pro:wght@400;600&display=swap" rel="stylesheet">
    

    <!-- Umami visitor tracking (GDPR compliant with no cookies) -->
    <script defer src="https://cloud.umami.is/script.js" data-website-id="4d9a9c3f-8181-49c7-bf14-77d7346abb6a"></script>
    
    <!-- Hamburger Menu JavaScript -->
    {{ $hamburgerJS := resources.Get "js/hamburger-menu.js" | resources.Minify | resources.Fingerprint }}
    <script src="{{ $hamburgerJS.RelPermalink }}" defer></script>
    
</head>
<body class="{{ if .IsHome }}home-page{{ else }}content-page{{ end }}">
    <div class="container">
        <header class="header">
            <div class="header-content">
                <div class="header-name">
                    <h1 class="site-title"><a href="{{ "/" | relURL }}" class="name-link link">Clay Davis</a></h1>
                    {{ if and (not .IsHome) (or (eq .RelPermalink "/publications/") (eq .RelPermalink "/teaching/")) }}
                    {{ range .Site.Menus.main }}
                      {{ if or ($.IsMenuCurrent "main" .) ($.HasMenuCurrent "main" .) }}
                    <button class="page-indicator" type="button" aria-label="Open navigation menu"> â€º {{ .Name }}</button>
                      {{ end }}
                    {{ end }}
                    {{ end }}
                </div>
                
                <!-- Hamburger menu button for mobile -->
                <button class="hamburger-btn" type="button" aria-label="Toggle navigation menu" aria-expanded="false" aria-controls="main-navigation">
                    <span class="hamburger-line"></span>
                    <span class="hamburger-line"></span>
                    <span class="hamburger-line"></span>
                </button>
                
                <nav class="nav" role="navigation" aria-label="Main navigation" id="main-navigation">
                    {{ range .Site.Menus.main }}
                    <a href="{{ .URL }}" class="btn nav-link {{ if $.IsMenuCurrent "main" . }}active{{ else if $.HasMenuCurrent "main" . }}active{{ end }}">
                        {{ .Name }}
                    </a>
                    {{ end }}
                </nav>
            </div>
        </header>
        
        <main class="main" id="main-content">
            {{ block "main" . }}{{ end }}
        </main>
        
        {{ if not .IsHome }}
        <footer class="footer">
            <nav class="contact-icons">
                <a href="mailto:cdavis@u.northwestern.edu" class="contact-link" aria-label="Email">
                    {{ readFile "static/icons/email.svg" | safeHTML }}
                </a>
                <a href="https://scholar.google.com/citations?hl=en&user=ZuazMDwAAAAJ" class="contact-link" aria-label="Google Scholar">
                    {{ readFile "static/icons/google-scholar.svg" | safeHTML }}
                </a>
                <a href="https://bsky.app/profile/claydav.is" class="contact-link" aria-label="Bluesky">
                    {{ readFile "static/icons/bluesky.svg" | safeHTML }}
                </a>
            </nav>
        </footer>
        {{ end }}
    </div>
    
    <!-- Page-specific JavaScript -->
    {{ block "page-js" . }}{{ end }}
</body>
</html> 